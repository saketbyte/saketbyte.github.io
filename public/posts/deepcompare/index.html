<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Compare Deeply Nested JS objects Interview Question | saketbyte</title>
<meta name="keywords" content="JavaScript, Interview, Coding, Frontend">
<meta name="description" content="A commonly asked interview question to compare dynamically structured nested objects">
<meta name="author" content="">
<link rel="canonical" href="https://saketbyte.github.io/posts/deepcompare/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e2798bd88395b9feeb2a4d73d504608d19dd39a782d06959c3fdddef0230dd44.css" integrity="sha256-4nmL2IOVuf7rKk1z1QRgjRndOaeC0GlZw/3d7wIw3UQ=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://saketbyte.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://saketbyte.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://saketbyte.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://saketbyte.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://saketbyte.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://saketbyte.github.io/posts/deepcompare/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:url" content="https://saketbyte.github.io/posts/deepcompare/">
  <meta property="og:site_name" content="saketbyte">
  <meta property="og:title" content="Compare Deeply Nested JS objects Interview Question">
  <meta property="og:description" content="A commonly asked interview question to compare dynamically structured nested objects">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-06-26T14:12:22+05:30">
    <meta property="article:modified_time" content="2025-06-26T14:12:22+05:30">
    <meta property="article:tag" content="JavaScript">
    <meta property="article:tag" content="Interview">
    <meta property="article:tag" content="Coding">
    <meta property="article:tag" content="Frontend">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Compare Deeply Nested JS objects Interview Question">
<meta name="twitter:description" content="A commonly asked interview question to compare dynamically structured nested objects">


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://saketbyte.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Compare Deeply Nested JS objects Interview Question",
      "item": "https://saketbyte.github.io/posts/deepcompare/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Compare Deeply Nested JS objects Interview Question",
  "name": "Compare Deeply Nested JS objects Interview Question",
  "description": "A commonly asked interview question to compare dynamically structured nested objects",
  "keywords": [
    "JavaScript", "Interview", "Coding", "Frontend"
  ],
  "articleBody": "Compare Deeply Nested Objects in JS This is a frequently asked question in interviews for Frontend or in general roles where you are expected to work in Javascript.\nI will go through each and every step which is required for a beginner to understand all the concepts required to tackle this or any deviation of the question. I was asked the question in my first interview of job switch, and I messed it up by figuring out all the logic during interview, never having seen this earlier. I do not want that to happen to me or my readers again. üòá\nTable of Contents: Objects in JS Why this is even needed? Nesting is not the only challenge. Recursive and Iterative approach. Slight deviation - track the changes. Objects in JS Objects store a collection of data. It is most often the format of JSON responses and requests in api calls that is why it is so important to know how to play with these. It will have some key-value pairs, methods as properties, passed as reference(keep this in mind), can show properties of inheritance based on the proptotype.\nWhy do we need such a function? In JavaScript, objects are a reference type. Two distinct objects are never equal, even if they have the same properties. Only comparing the same object reference with itself yields true. Hence even if 2 objects are storing exactly same data, if their memory reference is not same,the comparison will yield false.\n// source: developer.mozilla.org // Two variables, two distinct objects with the same properties const fruit = { name: \"apple\" }; const anotherFruit = { name: \"apple\" }; fruit == anotherFruit; // return false fruit === anotherFruit; // return false // Two variables, a single object const fruit = { name: \"apple\" }; const anotherFruit = fruit; // Assign fruit object reference to anotherFruit // Here fruit and anotherFruit are pointing to same object fruit == anotherFruit; // return true fruit === anotherFruit; // return true fruit.name = \"grape\"; console.log(anotherFruit); // { name: \"grape\" }; not { name: \"apple\" } Nesting is not the only challenge Now that it is clear there is a need to have a deepCompare function to check the equality of objects, we need to understand our requirements better. Deeply nested objects can always have a different kind of structure, nesting and data types, so we must have a robust function which does not have nested structure as it‚Äôs dependency, otherwise it will be hard-coded and fail every now and then. The object can have immense nesting, based on the api call or any other requirement, so we need to make sure we have optimised our approach as well.\nWE cannot just compare with ===. It should be independent of the structure of object nesting. It should be independent of the data types being used either primitive or user defined. (This requires many checks to be added in the iterative version.) Return type is boolean, and takes in 2 objects. Use early return logic so that we do not compare rest of the part as soon as difference is pointed out or equality is guaranteed. Recursive Approach for deep compare: Early return logic: Think of it like base cases What could be the factors which can lead us to certainty of our result:\nIf the reference address of both objects are same - TRUE as it means it is pointing to the same memory. a===b ? handle reference equality\nCheck if either of the objects are null, if so return if a===b again. handle null\nCheck if either of the object is not of same type or not. handle typer mismatch\nNow once we are sure that both the arguments have Object as it‚Äôs type, we can firstly extract the keys from both, and check if the keys are same in number or not.\nWhen we are sure that both args are objects and have same number of keys, we can pull up the socks and get started with deeper comparison of objects.\nNow that we have our early return/ base cases ready, we can check for rest of the cases which might be present. What checks should be there? As we know there are so many configurations an object can have, it is best to ask the interviewer if they can provide a sample JSON or object structure that needs to be compared.\nExample - All primitive Types, Set, Date, Map, Symbols, Arrays, Objects, Functions etc.\nLet us go through these checks one by one: There could be other kind of data types configuring our object which I have not included here, but the point is, refer the documentation for correct way of comparison of these objects as some have key-value pairs, some methods return non-iterable lists which will break the code. Instead we need to define custom comparison checks for each case.\na. Date -\nif (a instanceof Date \u0026\u0026 b instanceof Date) return a.getTime() === b.getTime(); b. RegExp -\nif (a instanceof RegExp \u0026\u0026 b instanceof RegExp) return a.source === b.source \u0026\u0026 a.flags === b.flags; c. function reference based comparison.\nif (typeof a === \"function\" || typeof b === \"function\") return a === b; Note that we can also compare using Stringify, but that would be a text based comparison, if one of the functions is arrow function but gives same output or something, it will return false. Not a good practise and tricky to compare functions in objects.\nd. Set\nif (a instanceof Set \u0026\u0026 b instanceof Set) { if (a.size !== b.size) return false; for (const val of a) if (!b.has(val)) return false; return true; } e. Map\nif (a instanceof Map \u0026\u0026 b instanceof Map) { if (a.size !== b.size) return false; for (const [key, val] of a) { // if the key is not present in b or if it is a nested map value (Note there is a recursive call explained later) if (!b.has(key) || !deepCompare(val, b.get(key))) return false; } return true; } Nota Bene How do you correctly extract the Keys of an object or an array?\nThere are several methods inbuilt in JS to achieve the functionality, but we have to pick according to our usecase which is independent of types and easy to traverse (enumerate or iterate). Object.keys(), Object.getOwnPropertyname(), Reflect.ownKeys() etc.\nBut what is Enumerable vs Iterable?\nEnumerable A property is enumerable if it shows up during property enumeration like for‚Ä¶in or Object.keys(). Objects are enumerable only and not iterable.\nWe can check via: Object.getOwnPropertyDescriptor(obj, ‚Äòkey‚Äô).enumerable\nIterable An object is iterable if it implements the Symbol.iterator method. We can use for‚Ä¶of on iterables.\nArrays are both enumerable (via indices) and iterable (via values).\nExamples: Arrays, Strings, Maps, Sets, array.keys(), array.entries()\nThink of a big cupboard with many drawers lined up in it. And some people like to organise the drawers by pasting a name below the door handle. This makes the otherwise ‚Äúiterable‚Äù drawer ‚Äúenumerable‚Äù now. The named drawer can be quickly accessed, someone can say - ‚ÄúGet me the blue colored medicine from the medicine drawer.‚Äù and another way would be without those labels - ‚ÄúCheck the cupboard and get me the blue colored medicine please?‚Äù. In the second case we will be iterating through the drawers and accessing the info, while in the first case, we had it enumerable.\nTechnically speaking, [Symbol.iterator] is added to an enumerable object to make it iterable. It is a generator function which will yield the value one by one.\nconst obj = { a: 10, b: 20, c: 30, [Symbol.iterator]: function* () { for (const key of Object.keys(this)) { yield this[key]; } } }; for (const value of obj) { console.log(value); // Output: 10, 20, 30 } Methods which are specific only to arrays can be:\n// using in-built functions for arrays Object.keys(array); array.keys(); Array.prototype.entries(); //using for in loop for (let idx in array) { // continue } Methods specific to Objects only would be:\n// using in-built functions for Objects Object.keys(obj); Object.getOwnPropertyNames(obj); Object.getOwnPropertySymbols(obj); // Only symbol keys Reflect.ownKeys(obj); // Gets all property keys even non-ennumerable and includes a length key. // using for loop for (let key in obj) { //continue } Okay just tell me what to use? Method Works on Object Works on Array Includes Symbol Keys Includes Non-Enumerable Keys Object.keys() Yes Yes No No Object.getOwnPropertyNames() Yes Yes No Yes Reflect.ownKeys() Yes Yes Yes Yes for...in Yes Yes No No (but includes inherited values too.) (Inherited values? It also includes keys inherited from its prototype if they are enumerable.)\nconst parent = { inheritedKey: \"hello\" }; const child = Object.create(parent); child.ownKey = \"world\"; for (let key in child) { console.log(key); // Op \"ownKey\", \"inheritedKey\" } console.log(Object.keys(child)); //Op [\"ownKey\"] As I mentioned we want things to be independent of types as much as possible so that the code stays robust and also does not leave out anything crucial. Hence we end up with the choice of Reflect.ownKeys(), because it allows us to have an enumerable array of keys which we can iterate and it works on both types array or Object both while including inherited keys and Symbols too.\nf. Arrays\nif (Array.isArray(a) \u0026\u0026 Array.isArray(b)) { if (a.length !== b.length) return false; for (let i = 0; i \u003c a.length; i++) { // compare here } return true; } g. Generic object (Will have to recur due to possibility of nesting):\n// Generic Object comparison (plain objects, class instances) if (typeof a === \"object\" \u0026\u0026 typeof b === \"object\") { if (a.constructor !== b.constructor) return false; const keysA = Reflect.ownKeys(a); const keysB = Reflect.ownKeys(b); if (keysA.length !== keysB.length) return false; for (const key of keysA) { if (!keysB.includes(key)) return false; if (!deepCompare(a[key], b[key])) return false; } return true; } // Fallback for unmatched types or values return false; In above cases we have our transition cases/other checks written correctly, we can think about how do we traverse in an object which is present inside another object, this is like recursive structure. And we can call the function on it‚Äôs branches and return from there. As soon as we expect branching of the next nested object start, we make a recursive call at that point. Putting this all together: function deepCompare(a: any, b: any): boolean { // Deep Equality comparison by reference if (a === b) return true; // Handle NaN value if (typeof a === \"number\" \u0026\u0026 typeof b === \"number\" \u0026\u0026 isNaN(a) \u0026\u0026 isNaN(b)) return true; // Handle null value if (a === null || b === null) return a === b; // Type mismatch in objects if (typeof a !== typeof b) return false; // Logical cases based on data types: // Handle Date if (a instanceof Date \u0026\u0026 b instanceof Date) return a.getTime() === b.getTime(); // Handle RegExp if (a instanceof RegExp \u0026\u0026 b instanceof RegExp) return a.source === b.source \u0026\u0026 a.flags === b.flags; // Handle Functions: compare by reference if (typeof a === \"function\" || typeof b === \"function\") return a === b; // Handle Set if (a instanceof Set \u0026\u0026 b instanceof Set) { if (a.size !== b.size) return false; for (let item of a) { if (![...b].some((el) =\u003e deepCompareIterative(el, item))) return false; } continue; } } // Handle Map - recursive call as nesting can occur if (a instanceof Map \u0026\u0026 b instanceof Map) { if (a.size !== b.size) return false; for (const [key, val] of a) { if (!b.has(key) || !deepCompare(val, b.get(key))) return false; } return true; } // Generic Object comparison (plain objects, class instances) if (typeof a === \"object\" \u0026\u0026 typeof b === \"object\") { if (a.constructor !== b.constructor) return false; const keysA = Reflect.ownKeys(a); const keysB = Reflect.ownKeys(b); if (keysA.length !== keysB.length) return false; for (const key of keysA) { if (!keysB.includes(key)) return false; if (!deepCompare(a[key], b[key])) return false; } return true; } // Fallback for unmatched types or values return false; // Arrays - recursive call as nesting can occur if (Array.isArray(a) \u0026\u0026 Array.isArray(b)) { if (a.length !== b.length) return false; for (let i = 0; i \u003c a.length; i++) { if (!deepCompare(a[i], b[i])) return false; } return true; } return false; } Iterative Approach for deep compare: An iterative deep comparison avoids recursion by using an explicit stack (or queue) to simulate the call stack. Instead of calling deepCompare recursively on each nested object or array, we maintain a stack of comparison tasks ‚Äî each representing a pair of values (a, b) that need to be compared.\nSince recursive stack is not maintained, we have to mimic the functionality by using a stack.\nTo mimic first function call, initialize a stack with the root pair.\nWhile the stack is not empty:\na. Pop a pair from the stack.\nb. Apply all the definitive checks on a and b like - reference comparison, type comparison, object comparison, number of keys comparison etc, if they mismatch, return false.\nc. Otherwise, push all corresponding nested pairs into the stack for comparison in the next iteration mimic further function calls in the order of which they popped from stack.\nfunction deepCompareIterative(a, b) { const stack = [[a, b]]; while (stack.length \u003e 0) { const [val1, val2] = stack.pop(); // Fast path for identical primitives or references if (val1 === val2) continue; // NaN equality if (typeof val1 === \"number\" \u0026\u0026 typeof val2 === \"number\" \u0026\u0026 isNaN(val1) \u0026\u0026 isNaN(val2)) continue; // Type mismatch or nulls if (typeof val1 !== typeof val2 || val1 === null || val2 === null) { return false; } // Dates if (val1 instanceof Date \u0026\u0026 val2 instanceof Date) { if (val1.getTime() !== val2.getTime()) return false; continue; } // RegExp if (val1 instanceof RegExp \u0026\u0026 val2 instanceof RegExp) { if (val1.source !== val2.source || val1.flags !== val2.flags) return false; continue; } // Functions (by reference only) if (typeof val1 === \"function\" || typeof val2 === \"function\") { if (val1 !== val2) return false; continue; } // Sets if (val1 instanceof Set \u0026\u0026 val2 instanceof Set) { if (val1.size !== val2.size) return false; for (let item of val1) { if (![...val2].some((el) =\u003e deepCompareIterative(el, item))) return false; } continue; } // Maps if (val1 instanceof Map \u0026\u0026 val2 instanceof Map) { if (val1.size !== val2.size) return false; for (let [key, value] of val1) { if (!val2.has(key)) return false; stack.push([value, val2.get(key)]); } continue; } // Arrays if (Array.isArray(val1) \u0026\u0026 Array.isArray(val2)) { if (val1.length !== val2.length) return false; for (let i = 0; i \u003c val1.length; i++) { stack.push([val1[i], val2[i]]); } continue; } // Generic Objects (plain objects or class instances) if (typeof val1 === \"object\" \u0026\u0026 typeof val2 === \"object\") { if (val1.constructor !== val2.constructor) return false; const keys1 = Reflect.ownKeys(val1); const keys2 = Reflect.ownKeys(val2); if (keys1.length !== keys2.length) return false; for (const key of keys1) { if (!keys2.includes(key)) return false; stack.push([val1[key], val2[key]]); } continue; } // Primitive inequality fallback return false; } return true; } I hope the concept is clear now. Try writing down the code by hand on a piece of paper. I always do that to make sure I am able to recall the core conepts and some of the syntax to bring fluidity in my code writing.\nSlight Deviation Question How would you return the actual changes at the same level of nesting instead of mere true and false?\n(Hint: Memoisation method in Recursive approach!)\nThank you for reading!\n",
  "wordCount" : "2543",
  "inLanguage": "en",
  "datePublished": "2025-06-26T14:12:22+05:30",
  "dateModified": "2025-06-26T14:12:22+05:30",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://saketbyte.github.io/posts/deepcompare/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "saketbyte",
    "logo": {
      "@type": "ImageObject",
      "url": "https://saketbyte.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://saketbyte.github.io/" accesskey="h" title="saketbyte (Alt + H)">saketbyte</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://saketbyte.github.io/posts/" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://saketbyte.github.io/categories/" title="Categories">
                    <span>Categories</span>
                </a>
            </li>
            <li>
                <a href="https://saketbyte.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
            <li>
                <a href="https://saketbyte.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://saketbyte.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://saketbyte.github.io/">Home</a>&nbsp;¬ª&nbsp;<a href="https://saketbyte.github.io/posts/">Posts</a></div>
    <h1 class="post-title entry-hint-parent">
      Compare Deeply Nested JS objects Interview Question
    </h1>
    <div class="post-description">
      A commonly asked interview question to compare dynamically structured nested objects
    </div>
    <div class="post-meta"><span title='2025-06-26 14:12:22 +0530 IST'>June 26, 2025</span>&nbsp;¬∑&nbsp;12 min

</div>
  </header> 
  <div class="post-content"><h1 id="compare-deeply-nested-objects-in-js">Compare Deeply Nested Objects in JS<a hidden class="anchor" aria-hidden="true" href="#compare-deeply-nested-objects-in-js">#</a></h1>
<p>This is a frequently asked question in interviews for Frontend or in general roles where you are expected to work in Javascript.</p>
<p>I will go through each and every step which is required for a beginner to understand all the concepts required to tackle this or any deviation of the question. I was asked the question in my first interview of job switch, and I messed it up by figuring out all the logic during interview, never having seen this earlier. I do not want that to happen to me or my readers again. üòá</p>
<h2 id="table-of-contents">Table of Contents:<a hidden class="anchor" aria-hidden="true" href="#table-of-contents">#</a></h2>
<ol>
<li><a href="#objects-in-js"> Objects in JS</a></li>
<li><a href="#why-do-we-need-such-a-function">Why this is even needed?</a></li>
<li><a href="#nesting-is-not-the-only-challenge">Nesting is not the only challenge.</a></li>
<li><a href="#recursive-approach-for-deep-compare">Recursive and Iterative approach.</a></li>
<li><a href="#slight-deviation-question">Slight deviation - track the changes.</a></li>
</ol>
<h2 id="objects-in-js">Objects in JS<a hidden class="anchor" aria-hidden="true" href="#objects-in-js">#</a></h2>
<p>Objects store a collection of data. It is most often the format of JSON responses and requests in api calls that is why it is so important to know how to play with these. It will have some key-value pairs, methods as properties, passed as reference(keep this in mind), can show properties of inheritance based on the proptotype.</p>
<h2 id="why-do-we-need-such-a-function">Why do we need such a function?<a hidden class="anchor" aria-hidden="true" href="#why-do-we-need-such-a-function">#</a></h2>
<p>In JavaScript, objects are a reference type. Two distinct objects are never equal, even if they have the same properties. Only comparing the same object reference with itself yields true. Hence even if 2 objects are storing exactly same data, if their memory reference is not same,the comparison will yield false.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// source: developer.mozilla.org
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Two variables, two distinct objects with the same properties
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fruit</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;apple&#34;</span> };
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">anotherFruit</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;apple&#34;</span> };
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">fruit</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">anotherFruit</span>; <span style="color:#75715e">// return false
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">fruit</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">anotherFruit</span>; <span style="color:#75715e">// return false
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Two variables, a single object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fruit</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;apple&#34;</span> };
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">anotherFruit</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">fruit</span>; <span style="color:#75715e">// Assign fruit object reference to anotherFruit
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Here fruit and anotherFruit are pointing to same object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">fruit</span> <span style="color:#f92672">==</span> <span style="color:#a6e22e">anotherFruit</span>; <span style="color:#75715e">// return true
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#a6e22e">fruit</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">anotherFruit</span>; <span style="color:#75715e">// return true
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">fruit</span>.<span style="color:#a6e22e">name</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;grape&#34;</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">anotherFruit</span>); <span style="color:#75715e">// { name: &#34;grape&#34; }; not { name: &#34;apple&#34; }
</span></span></span></code></pre></div><h2 id="nesting-is-not-the-only-challenge">Nesting is not the only challenge<a hidden class="anchor" aria-hidden="true" href="#nesting-is-not-the-only-challenge">#</a></h2>
<p>Now that it is clear there is a need to have a deepCompare function to check the equality of objects, we need to understand our requirements better. Deeply nested objects can always have a different kind of structure, nesting and data types, so we must have a robust function which does not have nested structure as it&rsquo;s dependency, otherwise it will be hard-coded and fail every now and then. The object can have immense nesting, based on the api call or any other requirement, so we need to make sure we have optimised our approach as well.</p>
<ol>
<li>WE cannot just compare with ===.</li>
<li>It should be independent of the structure of object nesting.</li>
<li>It should be independent of the data types being used either primitive or user defined. (This requires many checks to be added in the iterative version.)</li>
<li>Return type is boolean, and takes in 2 objects.</li>
<li>Use early return logic so that we do not compare rest of the part as soon as difference is pointed out or equality is guaranteed.</li>
</ol>
<h2 id="recursive-approach-for-deep-compare">Recursive Approach for deep compare:<a hidden class="anchor" aria-hidden="true" href="#recursive-approach-for-deep-compare">#</a></h2>
<h3 id="early-return-logic-think-of-it-like-base-cases">Early return logic: Think of it like base cases<a hidden class="anchor" aria-hidden="true" href="#early-return-logic-think-of-it-like-base-cases">#</a></h3>
<p>What could be the factors which can lead us to certainty of our result:</p>
<ol>
<li>
<p>If the reference address of both objects are same - TRUE as it means it is pointing to the same memory. <code>a===b</code> ? <strong>handle reference equality</strong></p>
</li>
<li>
<p>Check if either of the objects are null, if so return if a===b again. <strong>handle null</strong></p>
</li>
<li>
<p>Check if either of the object is not of same type or not. <strong>handle typer mismatch</strong></p>
</li>
<li>
<p>Now once we are sure that both the arguments have Object as it&rsquo;s type, we can firstly extract the keys from both, and check if the keys are same in number or not.</p>
</li>
<li>
<p>When we are sure that both args are objects and have same number of keys, we can pull up the socks and get started with deeper comparison of objects.</p>
</li>
<li>
<p>Now that we have our early return/ base cases ready, we can check for rest of the cases which might be present. What checks should be there? As we know there are so many configurations an object can have, it is best to ask the interviewer if they can provide a sample JSON or object structure that needs to be compared.</p>
</li>
</ol>
<p>Example - All primitive Types, Set, Date, Map, Symbols, Arrays, Objects, Functions etc.</p>
<ol start="7">
<li><strong>Let us go through these checks one by one:</strong></li>
</ol>
<p>There could be other kind of data types configuring our object which I have not included here, but the point is, refer the documentation for correct way of comparison of these objects as some have key-value pairs, some methods return non-iterable lists which will break the code.
Instead we need to define custom comparison checks for each case.</p>
<p>a. Date -</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span> <span style="color:#66d9ef">instanceof</span> Date <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">instanceof</span> Date) <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">getTime</span>() <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">getTime</span>();
</span></span></code></pre></div><p>b. RegExp -</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span> <span style="color:#66d9ef">instanceof</span> RegExp <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">instanceof</span> RegExp) <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">source</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">source</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">flags</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">flags</span>;
</span></span></code></pre></div><p>c. function reference based comparison.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;function&#34;</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;function&#34;</span>) <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>;
</span></span></code></pre></div><p>Note that we can also compare using Stringify, but that would be a text based comparison, if one of the functions is arrow function but gives same output or something, it will return false. Not a good practise and tricky to compare functions in objects.</p>
<p>d. Set</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Set</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Set</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">size</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">size</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">val</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">a</span>) <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">has</span>(<span style="color:#a6e22e">val</span>)) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>e. Map</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Map</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Map</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">size</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">size</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">val</span>] <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">a</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// if the key is not present in b or if it is a nested map value (Note there is a recursive call explained later)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">has</span>(<span style="color:#a6e22e">key</span>) <span style="color:#f92672">||</span> <span style="color:#f92672">!</span><span style="color:#a6e22e">deepCompare</span>(<span style="color:#a6e22e">val</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">key</span>))) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p><strong>Nota Bene</strong> How do you correctly extract the Keys of an object or an array?</p>
<p>There are several methods inbuilt in JS to achieve the functionality, but we have to pick according to our usecase which is independent of types and easy to traverse (enumerate or iterate).
Object.keys(), Object.getOwnPropertyname(), Reflect.ownKeys() etc.</p>
<p>But what is Enumerable vs Iterable?</p>
<h3 id="enumerable">Enumerable<a hidden class="anchor" aria-hidden="true" href="#enumerable">#</a></h3>
<p>A property is enumerable if it shows up during property enumeration like for&hellip;in or Object.keys().
<strong>Objects</strong> are <strong>enumerable</strong> only and not <strong>iterable</strong>.</p>
<p>We can check via:
Object.getOwnPropertyDescriptor(obj, &lsquo;key&rsquo;).enumerable</p>
<h3 id="iterable">Iterable<a hidden class="anchor" aria-hidden="true" href="#iterable">#</a></h3>
<p>An object is iterable if it implements the Symbol.iterator method. We can use for&hellip;of on iterables.</p>
<p>Arrays are both <strong>enumerable</strong> (via indices) and <strong>iterable</strong> (via values).</p>
<p><strong>Examples</strong>: Arrays, Strings, Maps, Sets, array.keys(), array.entries()</p>
<p>Think of a big cupboard with many drawers lined up in it. And some people like to organise the drawers by pasting a name below the door handle. This makes the otherwise &ldquo;iterable&rdquo; drawer &ldquo;enumerable&rdquo; now. The named drawer can be quickly accessed, someone can say - &ldquo;Get me the blue colored medicine from the medicine drawer.&rdquo; and another way would be without those labels - &ldquo;Check the cupboard and get me the blue colored medicine please?&rdquo;. In the second case we will be iterating through the drawers and accessing the info, while in the first case, we had it enumerable.</p>
<p>Technically speaking, <code>[Symbol.iterator]</code> is added to an enumerable object to make it iterable. It is a generator function which will yield the value one by one.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">obj</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">a</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">10</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">b</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">20</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">c</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">30</span>,
</span></span><span style="display:flex;"><span>	[<span style="color:#a6e22e">Symbol</span>.<span style="color:#a6e22e">iterator</span>]<span style="color:#f92672">:</span> <span style="color:#66d9ef">function</span><span style="color:#f92672">*</span> () {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">key</span> <span style="color:#66d9ef">of</span> Object.<span style="color:#a6e22e">keys</span>(<span style="color:#66d9ef">this</span>)) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">yield</span> <span style="color:#66d9ef">this</span>[<span style="color:#a6e22e">key</span>];
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">value</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">obj</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">value</span>); <span style="color:#75715e">// Output: 10, 20, 30
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>Methods which are specific only to arrays can be:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// using in-built functions for arrays
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>Object.<span style="color:#a6e22e">keys</span>(<span style="color:#a6e22e">array</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">array</span>.<span style="color:#a6e22e">keys</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Array.<span style="color:#a6e22e">prototype</span>.<span style="color:#a6e22e">entries</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">//using for in loop
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">idx</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">array</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// continue
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><p>Methods specific to Objects only would be:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// using in-built functions for Objects
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>Object.<span style="color:#a6e22e">keys</span>(<span style="color:#a6e22e">obj</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Object.<span style="color:#a6e22e">getOwnPropertyNames</span>(<span style="color:#a6e22e">obj</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Object.<span style="color:#a6e22e">getOwnPropertySymbols</span>(<span style="color:#a6e22e">obj</span>); <span style="color:#75715e">// Only symbol keys
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Reflect</span>.<span style="color:#a6e22e">ownKeys</span>(<span style="color:#a6e22e">obj</span>); <span style="color:#75715e">// Gets all property keys even non-ennumerable and includes a length key.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// using for loop
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">key</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">obj</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">//continue
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span></code></pre></div><h4 id="okay-just-tell-me-what-to-use">Okay just tell me what to use?<a hidden class="anchor" aria-hidden="true" href="#okay-just-tell-me-what-to-use">#</a></h4>
<table>
  <thead>
      <tr>
          <th>Method</th>
          <th>Works on Object</th>
          <th>Works on Array</th>
          <th>Includes Symbol Keys</th>
          <th>Includes Non-Enumerable Keys</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td><code>Object.keys()</code></td>
          <td>Yes</td>
          <td>Yes</td>
          <td>No</td>
          <td>No</td>
      </tr>
      <tr>
          <td><code>Object.getOwnPropertyNames()</code></td>
          <td>Yes</td>
          <td>Yes</td>
          <td>No</td>
          <td>Yes</td>
      </tr>
      <tr>
          <td><strong>Reflect.ownKeys()</strong></td>
          <td><strong>Yes</strong></td>
          <td><strong>Yes</strong></td>
          <td><strong>Yes</strong></td>
          <td><strong>Yes</strong></td>
      </tr>
      <tr>
          <td><code>for...in</code></td>
          <td>Yes</td>
          <td>Yes</td>
          <td>No</td>
          <td>No (but includes inherited values too.)</td>
      </tr>
  </tbody>
</table>
<p>(Inherited values? It also includes keys inherited from its prototype if they are enumerable.)</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">parent</span> <span style="color:#f92672">=</span> { <span style="color:#a6e22e">inheritedKey</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;hello&#34;</span> };
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">child</span> <span style="color:#f92672">=</span> Object.<span style="color:#a6e22e">create</span>(<span style="color:#a6e22e">parent</span>);
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">child</span>.<span style="color:#a6e22e">ownKey</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;world&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">key</span> <span style="color:#66d9ef">in</span> <span style="color:#a6e22e">child</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">key</span>); <span style="color:#75715e">// Op &#34;ownKey&#34;, &#34;inheritedKey&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(Object.<span style="color:#a6e22e">keys</span>(<span style="color:#a6e22e">child</span>)); <span style="color:#75715e">//Op [&#34;ownKey&#34;]
</span></span></span></code></pre></div><p>As I mentioned we want things to be independent of types as much as possible so that the code stays robust and also does not leave out anything crucial.
Hence we end up with the choice of <code>Reflect.ownKeys()</code>, because it allows us to have an enumerable array of keys which we can iterate and it works on both types array or Object both while including inherited keys and Symbols too.</p>
<hr>
<p>f. Arrays</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">if</span> (Array.<span style="color:#a6e22e">isArray</span>(<span style="color:#a6e22e">a</span>) <span style="color:#f92672">&amp;&amp;</span> Array.<span style="color:#a6e22e">isArray</span>(<span style="color:#a6e22e">b</span>)) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">length</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// compare here
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>g. Generic object (Will have to recur due to possibility of nesting):</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// Generic Object comparison (plain objects, class instances)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;object&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;object&#34;</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">constructor</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">constructor</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">keysA</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Reflect</span>.<span style="color:#a6e22e">ownKeys</span>(<span style="color:#a6e22e">a</span>);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">keysB</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Reflect</span>.<span style="color:#a6e22e">ownKeys</span>(<span style="color:#a6e22e">b</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">keysA</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">keysB</span>.<span style="color:#a6e22e">length</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">key</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">keysA</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">keysB</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#a6e22e">key</span>)) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">deepCompare</span>(<span style="color:#a6e22e">a</span>[<span style="color:#a6e22e">key</span>], <span style="color:#a6e22e">b</span>[<span style="color:#a6e22e">key</span>])) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// Fallback for unmatched types or values
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span></code></pre></div><ol start="8">
<li>In above cases we have our transition cases/other checks written correctly, we can think about how do we traverse in an object which is present inside another object, this is like recursive structure. And we can call the function on it&rsquo;s branches and return from there.
As soon as we expect branching of the next nested object start, we make a recursive call at that point.</li>
</ol>
<h3 id="putting-this-all-together">Putting this all together:<a hidden class="anchor" aria-hidden="true" href="#putting-this-all-together">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">deepCompare</span>(<span style="color:#a6e22e">a</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span>, <span style="color:#a6e22e">b</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">any</span>)<span style="color:#f92672">:</span> <span style="color:#66d9ef">boolean</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Deep Equality comparison by reference
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Handle NaN value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#f92672">&amp;&amp;</span> isNaN(<span style="color:#a6e22e">a</span>) <span style="color:#f92672">&amp;&amp;</span> isNaN(<span style="color:#a6e22e">b</span>)) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Handle null value
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">null</span>) <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Type mismatch in objects
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">!==</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">b</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Logical cases based on data types:
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// Handle Date
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span> <span style="color:#66d9ef">instanceof</span> Date <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">instanceof</span> Date) <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">getTime</span>() <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">getTime</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Handle RegExp
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span> <span style="color:#66d9ef">instanceof</span> RegExp <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">instanceof</span> RegExp) <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">source</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">source</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">flags</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">flags</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Handle Functions: compare by reference
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;function&#34;</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;function&#34;</span>) <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">b</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Handle Set
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Set</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Set</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">size</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">size</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">item</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">a</span>) {
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>[...<span style="color:#a6e22e">b</span>].<span style="color:#a6e22e">some</span>((<span style="color:#a6e22e">el</span>) =&gt; <span style="color:#a6e22e">deepCompareIterative</span>(<span style="color:#a6e22e">el</span>, <span style="color:#a6e22e">item</span>))) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Handle Map - recursive call as nesting can occur
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Map</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">b</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Map</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">size</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">size</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">val</span>] <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">a</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">has</span>(<span style="color:#a6e22e">key</span>) <span style="color:#f92672">||</span> <span style="color:#f92672">!</span><span style="color:#a6e22e">deepCompare</span>(<span style="color:#a6e22e">val</span>, <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">key</span>))) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Generic Object comparison (plain objects, class instances)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">a</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;object&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">b</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;object&#34;</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">constructor</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">constructor</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">keysA</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Reflect</span>.<span style="color:#a6e22e">ownKeys</span>(<span style="color:#a6e22e">a</span>);
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">keysB</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Reflect</span>.<span style="color:#a6e22e">ownKeys</span>(<span style="color:#a6e22e">b</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">keysA</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">keysB</span>.<span style="color:#a6e22e">length</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">key</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">keysA</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">keysB</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#a6e22e">key</span>)) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">deepCompare</span>(<span style="color:#a6e22e">a</span>[<span style="color:#a6e22e">key</span>], <span style="color:#a6e22e">b</span>[<span style="color:#a6e22e">key</span>])) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Fallback for unmatched types or values
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// Arrays -  recursive call as nesting can occur
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (Array.<span style="color:#a6e22e">isArray</span>(<span style="color:#a6e22e">a</span>) <span style="color:#f92672">&amp;&amp;</span> Array.<span style="color:#a6e22e">isArray</span>(<span style="color:#a6e22e">b</span>)) {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">b</span>.<span style="color:#a6e22e">length</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">a</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">deepCompare</span>(<span style="color:#a6e22e">a</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">b</span>[<span style="color:#a6e22e">i</span>])) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="iterative-approach-for-deep-compare">Iterative Approach for deep compare:<a hidden class="anchor" aria-hidden="true" href="#iterative-approach-for-deep-compare">#</a></h2>
<p>An iterative deep comparison avoids recursion by using an explicit stack (or queue) to simulate the call stack. Instead of calling deepCompare recursively on each nested object or array, we maintain a stack of comparison tasks ‚Äî each representing a pair of values (a, b) that need to be compared.</p>
<p>Since recursive stack is not maintained, we have to mimic the functionality by using a stack.</p>
<ol>
<li>
<p>To mimic first function call, initialize a stack with the root pair.</p>
</li>
<li>
<p>While the stack is not empty:</p>
</li>
</ol>
<p>a. Pop a pair from the stack.</p>
<p>b. Apply all the definitive checks on a and b like - reference comparison, type comparison, object comparison, number of keys comparison etc, if they mismatch, return false.</p>
<p>c. Otherwise, push all corresponding nested pairs into the stack for comparison in the next iteration mimic further function calls in the order of which they popped from stack.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">deepCompareIterative</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">stack</span> <span style="color:#f92672">=</span> [[<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>]];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">while</span> (<span style="color:#a6e22e">stack</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">0</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">const</span> [<span style="color:#a6e22e">val1</span>, <span style="color:#a6e22e">val2</span>] <span style="color:#f92672">=</span> <span style="color:#a6e22e">stack</span>.<span style="color:#a6e22e">pop</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// Fast path for identical primitives or references
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val1</span> <span style="color:#f92672">===</span> <span style="color:#a6e22e">val2</span>) <span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// NaN equality
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">val1</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">val2</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;number&#34;</span> <span style="color:#f92672">&amp;&amp;</span> isNaN(<span style="color:#a6e22e">val1</span>) <span style="color:#f92672">&amp;&amp;</span> isNaN(<span style="color:#a6e22e">val2</span>)) <span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// Type mismatch or nulls
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">val1</span> <span style="color:#f92672">!==</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">val2</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">val1</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">null</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">val2</span> <span style="color:#f92672">===</span> <span style="color:#66d9ef">null</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// Dates
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val1</span> <span style="color:#66d9ef">instanceof</span> Date <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">val2</span> <span style="color:#66d9ef">instanceof</span> Date) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val1</span>.<span style="color:#a6e22e">getTime</span>() <span style="color:#f92672">!==</span> <span style="color:#a6e22e">val2</span>.<span style="color:#a6e22e">getTime</span>()) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// RegExp
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val1</span> <span style="color:#66d9ef">instanceof</span> RegExp <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">val2</span> <span style="color:#66d9ef">instanceof</span> RegExp) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val1</span>.<span style="color:#a6e22e">source</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">val2</span>.<span style="color:#a6e22e">source</span> <span style="color:#f92672">||</span> <span style="color:#a6e22e">val1</span>.<span style="color:#a6e22e">flags</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">val2</span>.<span style="color:#a6e22e">flags</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// Functions (by reference only)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">val1</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;function&#34;</span> <span style="color:#f92672">||</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">val2</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;function&#34;</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val1</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">val2</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// Sets
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val1</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Set</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">val2</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Set</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val1</span>.<span style="color:#a6e22e">size</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">val2</span>.<span style="color:#a6e22e">size</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">item</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">val1</span>) {
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>[...<span style="color:#a6e22e">val2</span>].<span style="color:#a6e22e">some</span>((<span style="color:#a6e22e">el</span>) =&gt; <span style="color:#a6e22e">deepCompareIterative</span>(<span style="color:#a6e22e">el</span>, <span style="color:#a6e22e">item</span>))) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// Maps
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val1</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Map</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">val2</span> <span style="color:#66d9ef">instanceof</span> <span style="color:#a6e22e">Map</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val1</span>.<span style="color:#a6e22e">size</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">val2</span>.<span style="color:#a6e22e">size</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> [<span style="color:#a6e22e">key</span>, <span style="color:#a6e22e">value</span>] <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">val1</span>) {
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">val2</span>.<span style="color:#a6e22e">has</span>(<span style="color:#a6e22e">key</span>)) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>				<span style="color:#a6e22e">stack</span>.<span style="color:#a6e22e">push</span>([<span style="color:#a6e22e">value</span>, <span style="color:#a6e22e">val2</span>.<span style="color:#a6e22e">get</span>(<span style="color:#a6e22e">key</span>)]);
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// Arrays
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (Array.<span style="color:#a6e22e">isArray</span>(<span style="color:#a6e22e">val1</span>) <span style="color:#f92672">&amp;&amp;</span> Array.<span style="color:#a6e22e">isArray</span>(<span style="color:#a6e22e">val2</span>)) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val1</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">val2</span>.<span style="color:#a6e22e">length</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">val1</span>.<span style="color:#a6e22e">length</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span>) {
</span></span><span style="display:flex;"><span>				<span style="color:#a6e22e">stack</span>.<span style="color:#a6e22e">push</span>([<span style="color:#a6e22e">val1</span>[<span style="color:#a6e22e">i</span>], <span style="color:#a6e22e">val2</span>[<span style="color:#a6e22e">i</span>]]);
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// Generic Objects (plain objects or class instances)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (<span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">val1</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;object&#34;</span> <span style="color:#f92672">&amp;&amp;</span> <span style="color:#66d9ef">typeof</span> <span style="color:#a6e22e">val2</span> <span style="color:#f92672">===</span> <span style="color:#e6db74">&#34;object&#34;</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">val1</span>.<span style="color:#a6e22e">constructor</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">val2</span>.<span style="color:#a6e22e">constructor</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">keys1</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Reflect</span>.<span style="color:#a6e22e">ownKeys</span>(<span style="color:#a6e22e">val1</span>);
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">keys2</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Reflect</span>.<span style="color:#a6e22e">ownKeys</span>(<span style="color:#a6e22e">val2</span>);
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">keys1</span>.<span style="color:#a6e22e">length</span> <span style="color:#f92672">!==</span> <span style="color:#a6e22e">keys2</span>.<span style="color:#a6e22e">length</span>) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">key</span> <span style="color:#66d9ef">of</span> <span style="color:#a6e22e">keys1</span>) {
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">keys2</span>.<span style="color:#a6e22e">includes</span>(<span style="color:#a6e22e">key</span>)) <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>				<span style="color:#a6e22e">stack</span>.<span style="color:#a6e22e">push</span>([<span style="color:#a6e22e">val1</span>[<span style="color:#a6e22e">key</span>], <span style="color:#a6e22e">val2</span>[<span style="color:#a6e22e">key</span>]]);
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">continue</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// Primitive inequality fallback
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">false</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>I hope the concept is clear now. Try writing down the code by hand on a piece of paper. I always do that to make sure I am able to recall the core conepts and some of the syntax to bring fluidity in my code writing.</p>
<h2 id="slight-deviation-question">Slight Deviation Question<a hidden class="anchor" aria-hidden="true" href="#slight-deviation-question">#</a></h2>
<p>How would you return the actual changes at the same level of nesting instead of mere true and false?</p>
<p>(Hint: Memoisation method in Recursive approach!)</p>
<p>Thank you for reading!</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://saketbyte.github.io/tags/javascript/">JavaScript</a></li>
      <li><a href="https://saketbyte.github.io/tags/interview/">Interview</a></li>
      <li><a href="https://saketbyte.github.io/tags/coding/">Coding</a></li>
      <li><a href="https://saketbyte.github.io/tags/frontend/">Frontend</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://saketbyte.github.io/posts/promise.all-implementation/">
    <span class="title">¬´ Prev</span>
    <br>
    <span>Promise Aggregator Functions Implementation</span>
  </a>
  <a class="next" href="https://saketbyte.github.io/posts/hoisting-and-scopes/">
    <span class="title">Next ¬ª</span>
    <br>
    <span>Hoisting and Scopes</span>
  </a>
</nav>

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://saketbyte.github.io/">saketbyte</a></span> ¬∑ 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
